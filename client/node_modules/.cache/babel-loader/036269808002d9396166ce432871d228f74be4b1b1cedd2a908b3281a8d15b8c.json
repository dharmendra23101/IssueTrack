{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useParams,useNavigate,Link}from'react-router-dom';import{fetchIssue,deleteIssue}from'../api';import ConfirmDialog from'./ConfirmDialog';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function IssueDetail(){const{id}=useParams();const navigate=useNavigate();const[issue,setIssue]=useState(null);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[showDeleteConfirmation,setShowDeleteConfirmation]=useState(false);useEffect(()=>{const getIssue=async()=>{try{setLoading(true);const response=await fetchIssue(id);if(response.success){setIssue(response.data);}else{setError('Failed to fetch issue details');}}catch(err){setError('Error connecting to server');console.error(err);}finally{setLoading(false);}};getIssue();},[id]);const handleDelete=async()=>{try{await deleteIssue(id);navigate('/');}catch(err){setError('Failed to delete issue');console.error(err);}};const getPriorityBadgeColor=priority=>{switch(priority===null||priority===void 0?void 0:priority.toLowerCase()){case'high':return'bg-red-100 text-red-800';case'medium':return'bg-yellow-100 text-yellow-800';case'low':return'bg-green-100 text-green-800';default:return'bg-gray-100 text-gray-800';}};const getStatusBadgeColor=status=>{switch(status===null||status===void 0?void 0:status.toLowerCase()){case'open':return'bg-blue-100 text-blue-800';case'in progress':return'bg-purple-100 text-purple-800';case'closed':return'bg-gray-100 text-gray-800';default:return'bg-gray-100 text-gray-800';}};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center items-center h-64\",children:/*#__PURE__*/_jsx(\"div\",{className:\"text-lg\",children:\"Loading issue details...\"})});}if(error){return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded\",role:\"alert\",children:[/*#__PURE__*/_jsx(\"strong\",{className:\"font-bold\",children:\"Error!\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"block sm:inline\",children:[\" \",error]})]});}if(!issue){return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-yellow-100 border border-yellow-400 text-yellow-700 px-4 py-3 rounded\",role:\"alert\",children:[/*#__PURE__*/_jsx(\"strong\",{className:\"font-bold\",children:\"Issue not found!\"}),/*#__PURE__*/_jsx(\"span\",{className:\"block sm:inline\",children:\" The requested issue could not be found.\"})]});}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(Link,{to:\"/\",className:\"text-blue-600 hover:text-blue-800 mr-2\",children:\"\\u2190 Back\"}),/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold\",children:issue.title})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsx(Link,{to:`/issues/${id}/edit`,className:\"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700\",children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowDeleteConfirmation(true),className:\"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700\",children:\"Delete\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white shadow overflow-hidden rounded-lg\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"px-4 py-5 sm:px-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg leading-6 font-medium text-gray-900\",children:[\"Issue ID: \",/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-500\",children:issue.id})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"mt-1 max-w-2xl text-sm text-gray-500\",children:[\"Created on \",new Date(issue.createdAt).toLocaleString()]}),issue.createdAt!==issue.updatedAt&&/*#__PURE__*/_jsxs(\"p\",{className:\"mt-1 max-w-2xl text-sm text-gray-500\",children:[\"Last updated on \",new Date(issue.updatedAt).toLocaleString()]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${getStatusBadgeColor(issue.status)}`,children:issue.status}),/*#__PURE__*/_jsxs(\"span\",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${getPriorityBadgeColor(issue.priority)}`,children:[issue.priority,\" Priority\"]})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"border-t border-gray-200\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"px-4 py-5 sm:p-6\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-lg font-medium text-gray-900 mb-2\",children:\"Description\"}),/*#__PURE__*/_jsx(\"p\",{className:\"whitespace-pre-wrap\",children:issue.description})]})})]}),showDeleteConfirmation&&/*#__PURE__*/_jsx(ConfirmDialog,{title:\"Delete Issue\",message:\"Are you sure you want to delete this issue? This action cannot be undone.\",confirmLabel:\"Delete\",cancelLabel:\"Cancel\",onConfirm:handleDelete,onCancel:()=>setShowDeleteConfirmation(false)})]});}export default IssueDetail;","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","Link","fetchIssue","deleteIssue","ConfirmDialog","jsx","_jsx","jsxs","_jsxs","IssueDetail","id","navigate","issue","setIssue","loading","setLoading","error","setError","showDeleteConfirmation","setShowDeleteConfirmation","getIssue","response","success","data","err","console","handleDelete","getPriorityBadgeColor","priority","toLowerCase","getStatusBadgeColor","status","className","children","role","to","title","onClick","Date","createdAt","toLocaleString","updatedAt","description","message","confirmLabel","cancelLabel","onConfirm","onCancel"],"sources":["C:/Users/DHARMENDRA/Desktop/My Web/issue-tracker/client/src/components/IssueDetail.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useParams, useNavigate, Link } from 'react-router-dom';\r\nimport { fetchIssue, deleteIssue } from '../api';\r\nimport ConfirmDialog from './ConfirmDialog';\r\n\r\nfunction IssueDetail() {\r\n  const { id } = useParams();\r\n  const navigate = useNavigate();\r\n  const [issue, setIssue] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [showDeleteConfirmation, setShowDeleteConfirmation] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const getIssue = async () => {\r\n      try {\r\n        setLoading(true);\r\n        const response = await fetchIssue(id);\r\n        if (response.success) {\r\n          setIssue(response.data);\r\n        } else {\r\n          setError('Failed to fetch issue details');\r\n        }\r\n      } catch (err) {\r\n        setError('Error connecting to server');\r\n        console.error(err);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    getIssue();\r\n  }, [id]);\r\n\r\n  const handleDelete = async () => {\r\n    try {\r\n      await deleteIssue(id);\r\n      navigate('/');\r\n    } catch (err) {\r\n      setError('Failed to delete issue');\r\n      console.error(err);\r\n    }\r\n  };\r\n\r\n  const getPriorityBadgeColor = (priority) => {\r\n    switch (priority?.toLowerCase()) {\r\n      case 'high':\r\n        return 'bg-red-100 text-red-800';\r\n      case 'medium':\r\n        return 'bg-yellow-100 text-yellow-800';\r\n      case 'low':\r\n        return 'bg-green-100 text-green-800';\r\n      default:\r\n        return 'bg-gray-100 text-gray-800';\r\n    }\r\n  };\r\n\r\n  const getStatusBadgeColor = (status) => {\r\n    switch (status?.toLowerCase()) {\r\n      case 'open':\r\n        return 'bg-blue-100 text-blue-800';\r\n      case 'in progress':\r\n        return 'bg-purple-100 text-purple-800';\r\n      case 'closed':\r\n        return 'bg-gray-100 text-gray-800';\r\n      default:\r\n        return 'bg-gray-100 text-gray-800';\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex justify-center items-center h-64\">\r\n        <div className=\"text-lg\">Loading issue details...</div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <div className=\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded\" role=\"alert\">\r\n        <strong className=\"font-bold\">Error!</strong>\r\n        <span className=\"block sm:inline\"> {error}</span>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!issue) {\r\n    return (\r\n      <div className=\"bg-yellow-100 border border-yellow-400 text-yellow-700 px-4 py-3 rounded\" role=\"alert\">\r\n        <strong className=\"font-bold\">Issue not found!</strong>\r\n        <span className=\"block sm:inline\"> The requested issue could not be found.</span>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"flex justify-between items-center mb-6\">\r\n        <div className=\"flex items-center\">\r\n          <Link to=\"/\" className=\"text-blue-600 hover:text-blue-800 mr-2\">\r\n            &larr; Back\r\n          </Link>\r\n          <h1 className=\"text-2xl font-bold\">{issue.title}</h1>\r\n        </div>\r\n        <div className=\"flex gap-2\">\r\n          <Link\r\n            to={`/issues/${id}/edit`}\r\n            className=\"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700\"\r\n          >\r\n            Edit\r\n          </Link>\r\n          <button\r\n            onClick={() => setShowDeleteConfirmation(true)}\r\n            className=\"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700\"\r\n          >\r\n            Delete\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"bg-white shadow overflow-hidden rounded-lg\">\r\n        <div className=\"px-4 py-5 sm:px-6\">\r\n          <div className=\"flex justify-between\">\r\n            <div>\r\n              <h3 className=\"text-lg leading-6 font-medium text-gray-900\">\r\n                Issue ID: <span className=\"text-gray-500\">{issue.id}</span>\r\n              </h3>\r\n              <p className=\"mt-1 max-w-2xl text-sm text-gray-500\">\r\n                Created on {new Date(issue.createdAt).toLocaleString()}\r\n              </p>\r\n              {issue.createdAt !== issue.updatedAt && (\r\n                <p className=\"mt-1 max-w-2xl text-sm text-gray-500\">\r\n                  Last updated on {new Date(issue.updatedAt).toLocaleString()}\r\n                </p>\r\n              )}\r\n            </div>\r\n            <div className=\"flex gap-2\">\r\n              <span className={`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${getStatusBadgeColor(issue.status)}`}>\r\n                {issue.status}\r\n              </span>\r\n              <span className={`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${getPriorityBadgeColor(issue.priority)}`}>\r\n                {issue.priority} Priority\r\n              </span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"border-t border-gray-200\">\r\n          <div className=\"px-4 py-5 sm:p-6\">\r\n            <h4 className=\"text-lg font-medium text-gray-900 mb-2\">Description</h4>\r\n            <p className=\"whitespace-pre-wrap\">{issue.description}</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {showDeleteConfirmation && (\r\n        <ConfirmDialog\r\n          title=\"Delete Issue\"\r\n          message=\"Are you sure you want to delete this issue? This action cannot be undone.\"\r\n          confirmLabel=\"Delete\"\r\n          cancelLabel=\"Cancel\"\r\n          onConfirm={handleDelete}\r\n          onCancel={() => setShowDeleteConfirmation(false)}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default IssueDetail;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}